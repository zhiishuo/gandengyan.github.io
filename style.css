/* ================= DiamantÃ© Â· ä¸»é¢˜å˜é‡ï¼ˆä¸­æ€§/çŸ³å¢¨ï¼‰ ================= */
:root{
  /* Chrome åŒºï¼ˆé¡¶éƒ¨/åº•éƒ¨æ ã€æµ®åŠ¨æ¡ç­‰æ¡†æ¶å±‚ï¼‰ */
  --chrome-bg: #0e141f;
  --chrome-bg-blur: rgba(14, 20, 31, 0.95);
  --chrome-line: rgba(247, 248, 255, 0.2);

  /* Content åŒºï¼ˆä¸­é—´é¡µé¢èƒŒæ™¯ + é¢æ¿ï¼‰ */
  --content-bg1: rgba(20,23,29,.42);
  --content-bg2: #0f1624;
  --panel: rgba(32,37,48,.92);
  --line: rgba(180,186,206,.20);

  /* æ–‡æœ¬ä¸çŠ¶æ€è‰² */
  --ink:#f6f8fb; --muted:#c5ceda;
  --accent:#29d076; --warn:#ef4444; --info:#58c7f3;

  --shadow: 0 12px 30px rgba(0,0,0,.24);
  --radius: 18px;
  --trans-fast:.18s cubic-bezier(.22,.61,.36,1);
  --trans-slow:.35s cubic-bezier(.22,.61,.36,1);

  /* åº•éƒ¨å°ºå¯¸å˜é‡ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰ */
  --tabbar-h: 88px;
  --tabbar-offset: 24px;
}

*{box-sizing:border-box}
html,body{height:100%}
html,body { touch-action: manipulation; }

html{
  background:
    radial-gradient(1100px 700px at 15% -10%, #10213840 0%, transparent 60%),
    radial-gradient(900px 700px at 105% 0%, #0d263840 0%, transparent 60%),
    linear-gradient(180deg, var(--content-bg1), var(--content-bg2));
  background-color: var(--content-bg1);
  color-scheme: dark;
}
body{
  margin:0; color:var(--ink);
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Inter,Helvetica,Arial;
  background:none;
}

/* ========== é¡¶éƒ¨æ  ========== */
header{
  position:sticky; top:0; z-index:50;
  padding: calc(10px + env(safe-area-inset-top)) 14px 12px;
  border-bottom:1px solid var(--chrome-line);
  background: var(--chrome-bg);
  color: var(--ink);
}
.titleRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
h1{ margin:0; font-size:18px; letter-spacing:.3px }
.badgeMini{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border:1px solid var(--line);
  border-radius:999px; background:#0f1520; font-size:12px;
}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}

/* ========== è§†å£å®¹å™¨ ========== */
.viewport{
  position:relative;
  height:calc(100dvh - var(--tabbar-h) - var(--tabbar-offset));
  overflow:hidden;
}
.pages{
  height:100%; display:flex;
  transform:translate3d(0,0,0);
  transition:transform var(--trans-slow);
  overscroll-behavior-x: contain;
  touch-action: pan-y;
}
.page{
  flex:0 0 100%;
  padding: 16px 12px calc(16px + var(--tabbar-h) + var(--tabbar-offset) + env(safe-area-inset-bottom));
  overflow:auto; -webkit-overflow-scrolling:touch;
}

/* ========== é€šç”¨/é¢æ¿/è¡¨æ ¼/è¾“å…¥ ========== */
.panel{
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:12px; box-shadow: var(--shadow);
}
.panel h2{margin:6px 0 10px; font-size:16px}
.flex{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.pill{font-size:14px; padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:#101723}
input,select,button{
  border-radius:12px; border:1px solid var(--line);
  background:#0f1724; color:var(--ink);
  padding:12px 14px; font-size:16px;
}
button{cursor:pointer; min-height:44px; transition:transform var(--trans-fast),box-shadow var(--trans-fast)}
button:active{transform:scale(.98)}
.btn{padding:12px 16px}
.btn.accent{ background:#0f2f21; border-color:#227a50; color:#dffbe9 }
.btn.warn{ background:#3a1212; border-color:#6a1d1d; color:#ffd5d5 }
.muted{color:var(--muted); font-size:14px}
table{width:100%; border-collapse:collapse; font-size:16px}
th,td{border-bottom:1px dashed var(--line); padding:10px 6px; text-align:center}
th{color:#e8edf6; font-weight:600}
.name{width:160px}
.num{width:90px; text-align:right}
:focus{ outline:none }
:focus-visible{ outline:2px solid #3b82f6; outline-offset:2px }

/* ========== åº•éƒ¨ Tab ========== */
.tabbar{
  position:fixed; left:8px; right:8px;
  bottom: calc(env(safe-area-inset-bottom) + var(--tabbar-offset));
  z-index:60;
  display:flex; justify-content:space-around; gap:6px;
  height: var(--tabbar-h);
  border-top:1px solid var(--chrome-line);
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(12px);
  border-radius: 20px;
}
.tabbtn{
  flex:1;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px;                   /* å›¾æ ‡å’Œæ–‡å­—é—´è·å°ä¸€ç‚¹ */
  color:#e8eefb;
  font-size:11px;            /* å­—ä½“ç¼©å°ï¼Œä¸å–§å®¾å¤ºä¸» */
  min-width:0;
  transition:background var(--trans-fast), border-color var(--trans-fast), color var(--trans-fast);
  padding: 8px 4px;
}
.tabbtn .ico{
  font-size:36px;            /* å›¾æ ‡æ”¾å¤§ */
  line-height:1;
}
.tabbtn.active{
  background: linear-gradient(180deg,#0e1522,#0c1019);
  border-color:#3e516a;
  color:#ffffff;
}

/* ========== ç‚¸å¼¹å¡ ========== */
.bombCard{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px;
  border-radius:14px;
  background: linear-gradient(180deg,#3a1216,#241014);
  border:1px solid rgba(197, 0, 0, 0.28);
  padding:18px 12px; text-align:center;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 20px rgba(90,20,20,.22);
}
.bombLabel{ font-size:13px; color:#ffd8d8; display:flex; align-items:center; gap:6px; letter-spacing:.2px }
.bombLabel::before{content:"ğŸ’£";}
.bombValue{ font-weight:800; font-size:30px; letter-spacing:.4px; color:#fff2f2 }
.bombBtns .btn{
  min-width:128px; min-height:62px; font-size:24px; font-weight:800; border-radius:14px;
}
#bombDec, #bombInc{ background:#2b0f12; border-color:#7a2d2d; color:#ffe2e2 }
#bombReset{ background:#3a1515; border-color:#a33a3a; color:#ffdede }


/* ========== å°è®¡æµ®æ¡ ========== */
/* è®©â€œå°è®¡æµ®æ¡â€æ°¸è¿œåœ¨å››ä¸ªæŒ‰é’®ä¹‹ä¸Šï¼Œå¹¶å†ä¸Šç§»ä¸€äº› */
.subtotalDock{
  position: fixed;
  left: 8px;
  right: 8px;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 28px + env(safe-area-inset-bottom));
  /* â†‘ è¿™é‡Œ 28px ä½ å¯æŒ‰éœ€è°ƒå¤§/è°ƒå°ï¼ˆ20~36 éƒ½è¡Œï¼‰ */
  z-index: 80;  /* å¿…é¡»æ¯” .tabbar çš„ 60 å¤§ */
  opacity: 0;
  transform: translateY(8px);
  pointer-events: none;
  transition: opacity .25s var(--trans-slow), transform .25s var(--trans-slow);
}
.subtotalDock.show{ opacity:1; transform:translateY(0) }
.subtotalDock .dockInner{
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding:12px 14px;
  border:1px solid var(--chrome-line);
  border-radius:20px;
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow);
}
.subtotalDock .dockInner > div{
  font-size:13px;            /* æ ‡é¢˜é€‚ä¸­ */
  color:#dfe7f6;
}
.subtotalDock .dockInner .mono{
  font-size:18px;            /* æ•°å­—ç•¥å¤§ä½†ä¸è¿‡åˆ† */
  font-weight:700;
  letter-spacing:.2px;
}
#dockPot{ font-size:19px; font-weight:800; }

/* ========== Toast ========== */
.toast{
  position:fixed; left:50%;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 24px);
  transform:translateX(-50%) translateY(20px);
  background:#0f2b1b; border:1px solid #1b5e38; color:#caffdd;
  padding:10px 14px; border-radius:999px; box-shadow:var(--shadow);
  opacity:0; pointer-events:none; transition:opacity var(--trans-slow), transform var(--trans-slow);
  z-index:70;
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(0)}

/* ========== æ’åå¡ç‰‡ ========== */
.rankHeader{ text-align:center; margin:4px 0 10px 0 }
.rankHeader h2{ margin:0; font-size:17px; letter-spacing:.4px }
.rankHeader .sub{ margin-top:4px; font-size:12px; color:var(--muted) }
.rankList{ display:flex; flex-direction:column; gap:6px }
.rankCard{
  display:grid; grid-template-columns:56px 1fr auto; gap:10px; align-items:center;
  padding:10px 12px; border:1px solid var(--line); border-radius:14px; background:#0f1520aa;
}
.rankNo{
  width:48px; height:48px; border-radius:12px; display:grid; place-items:center;
  font-weight:900; font-size:22px; color:#0e1116; background:#858282;
}
.rankNo.gold{ background:linear-gradient(135deg,#ffd76a,#f4b400,#d9a400); color:#3a2a09 }
.rankNo.silver{ background:linear-gradient(135deg,#f0f3f8,#cfd6de,#b9c2cc); color:#2e3135 }
.rankNo.bronze{ background:linear-gradient(135deg,#f2c7a1,#d99159,#a56438); color:#2f1d0f }
.rankName{ font-size:16px }
.rankScore{
  justify-self:end; font-family:ui-monospace,Menlo,Consolas,monospace;
  font-size:26px; font-weight:800; padding:6px 10px; border-radius:12px;
  background:#0f1520; border:1px solid var(--line);
  letter-spacing:.2px; display:inline-flex; align-items:baseline; gap:4px;
}
.rankScore .unit{ font-size:12px; opacity:.7 }
.rankCard.top .rankScore{ box-shadow:0 4px 16px rgba(0,0,0,.25); background:linear-gradient(180deg,#101826,#0c121c) }
.rankCard.pos .rankScore{ color:#16a34a }
.rankCard.neg .rankScore{ color:#f87171 }
.rankCard.zero .rankScore{ color:#e5e7eb }

/* ========== å…¶å®ƒç»†èŠ‚ ========== */
.remainInp:disabled{ opacity:.6; color:#fff; }

/* ---- ç»Ÿä¸€æ§åˆ¶å°è®¡æµ®æ¡ä¸åº•éƒ¨ Tab çš„ç›¸å¯¹é—´è· ---- */
:root{
  --dock-gap: 40px;  /* å°è®¡æµ®æ¡è· Tab çš„é¢å¤–é—´è·ï¼ˆå¯æŒ‰éœ€æ”¹ 24~48ï¼‰ */
}

/* å°è®¡æµ®æ¡ï¼šæ¯” tabbar å±‚çº§ä½ï¼Œä¸ä¼šé®ä½ï¼›å¹¶å¾€ä¸ŠæŠ¬ä¸€äº› */
.subtotalDock{
  position: fixed;
  left: 8px;
  right: 8px;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + var(--dock-gap) + env(safe-area-inset-bottom));
  z-index: 58;  /* tabbar æ˜¯ 60ï¼›å°è®¡æ¡æ”¾åœ¨å…¶ä¸‹æ–¹ï¼Œé¿å…é®æŒ¡ */
  opacity: 0;
  transform: translateY(8px);
  pointer-events: none;  /* ä¿é™©ï¼šå³ä½¿è§†è§‰é‡å ä¹Ÿä¸ä¼šæ‹¦æˆªç‚¹å‡» */
  transition: opacity .25s var(--trans-slow), transform .25s var(--trans-slow);
}
.subtotalDock.show{ opacity:1; transform:translateY(0) }

/* å†…éƒ¨æ ·å¼ä¿æŒä¸å˜ï¼ˆå¦‚éœ€ï¼‰ */
.subtotalDock .dockInner{
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding:12px 14px;
  border:1px solid var(--chrome-line);
  border-radius:20px;
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(12px);
  box-shadow: var(--shadow);
}

/* ---- ç»Ÿä¸€å˜é‡ï¼šå°è®¡æ¡é«˜åº¦ä¸é—´è· ---- */
:root{
  --dock-h: 54px;     /* å°è®¡æ¡æœ¬èº«çš„å¯è§†é«˜åº¦ï¼ˆæŒ‰ä½ çš„æ ·å¼å¤§çº¦ 50~56ï¼‰ */
  --dock-gap: 24px;   /* å°è®¡æ¡ä¸åº•éƒ¨å››ä¸ªæŒ‰é’®ä¹‹é—´çš„å‚ç›´é—´è· */
}

/* è®©é¡µé¢åº•éƒ¨ä¸ºä¸¤å—å›ºå®šå…ƒç´ éƒ½é¢„ç•™ç©ºé—´ï¼ˆTab + å°è®¡æ¡ + é—´è·ï¼‰ */
.page{
  padding-bottom: calc(
    16px + var(--tabbar-h) + var(--tabbar-offset) + var(--dock-h) + var(--dock-gap) + env(safe-area-inset-bottom)
  ) !important;
}

/* å°è®¡æ¡ï¼šæ”¾åœ¨ Tab ä¸Šæ–¹ï¼›å±‚çº§ä½äº Tabï¼Œä¸æŒ¡ç‚¹å‡»ï¼›å¿…è¦æ—¶å†è°ƒ gap å³å¯ */
.subtotalDock{
  position: fixed;
  left: 8px;
  right: 8px;
  bottom: calc(
    var(--tabbar-h) + var(--tabbar-offset) + var(--dock-gap) + env(safe-area-inset-bottom)
  ) !important;
  z-index: 58;                /* tabbar æ˜¯ 60ï¼Œè¿™é‡Œæ›´ä½ï¼Œä¸ä¼šé®æŒ¡ */
  pointer-events: none;       /* å³ä½¿é‡å ä¹Ÿä¸ä¼šæ‹¦æˆªç‚¹å‡» */
  opacity: 0;
  transform: translateY(8px);
  transition: opacity .25s var(--trans-slow), transform .25s var(--trans-slow);
}
.subtotalDock

/* === ç®€çº¦åˆ†æ®µå¼ Tabï¼ˆå›¾æ ‡å¤§ã€æ–‡å­—å°ã€æ— åšé‡è¾¹æ¡†ï¼‰ === */
.tabbar{
  position: fixed;
  left: 8px; right: 8px;
  bottom: calc(env(safe-area-inset-bottom) + var(--tabbar-offset));
  z-index: 60;
  display: flex; gap: 0; justify-content: space-between;
  height: var(--tabbar-h);
  padding: 0 10px;                    /* å†…è¾¹è·æ›´è½» */
  border-top: 1px solid var(--chrome-line);
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(12px);
  border-radius: 16px;                /* å®¹å™¨è½»åœ†è§’ */
}

/* æŒ‰é’®æœ¬ä½“ï¼šå»æ‰å…¨å±€æŒ‰é’®çš„è¾¹æ¡†å’ŒèƒŒæ™¯ï¼Œåšæ‰å¹³ */
.tabbtn{
  position: relative;
  flex: 1 1 0;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 6px;
  padding: 10px 4px;
  background: transparent !important;
  border: none !important;            /* è¦†ç›–å…¨å±€ button è¾¹æ¡† */
  box-shadow: none !important;
  color: #cfd7e6;
  font-size: 11px;                    /* æ–‡å­—å°è€Œå…‹åˆ¶ */
  min-width: 0;
  transition: transform .12s ease, color .18s ease, background .18s ease;
}

/* å›¾æ ‡æ›´å¤§ã€æ›´èšç„¦ */
.tabbtn .ico{
  font-size: 36px;                    /* å›¾æ ‡ä¸»è§’ */
  line-height: 1;
  filter: saturate(.95) brightness(1.05);
}

/* é¡¶éƒ¨ç»†çº¿æŒ‡ç¤ºé€‰ä¸­ï¼ˆä¼˜é›…ï¼Œä¸å–§å®¾ï¼‰ */
.tabbtn::before{
  content: "";
  position: absolute;
  left: 1%; right: 1%; top: 6px;
  height: 3px; border-radius: 3px;
  background: var(--accent);
  opacity: 0; transform: scaleX(.4);
  transition: transform .22s var(--trans-fast), opacity .22s var(--trans-fast);
}
.tabbtn.active{
  color: #ffffff;
}
.tabbtn.active .ico{ filter: none; }
.tabbtn.active::before{
  opacity: 1;
  transform: scaleX(1);
}

/* è½»åˆ†éš”çº¿ï¼šåªåœ¨å®¹å™¨é‡Œåšâ€œåˆ—çº¿â€ï¼Œä¸åŠ å¡ç‰‡å¤–æ¡† */
.tabbtn:not(:last-child)::after{
  content: "";
  position: absolute;
  right: 0; top: 14px; bottom: 14px;
  width: 1px; background: var(--chrome-line);
  opacity: .6;
}

/* è§¦æ„Ÿåé¦ˆï¼šæ‚¬åœè½»åº•è‰²ã€æŒ‰ä¸‹è½»å¾®ä¸‹æ²‰ï¼ˆç§»åŠ¨è®¾å¤‡ä¹Ÿè‡ªç„¶ï¼‰ */
@media (hover:hover){
  .tabbtn:hover{ background: rgba(255,255,255,.02); }
}
.tabbtn:active{ transform: translateY(1px) scale(.99); }

/* === Bomb Card åŠ¨ç”»æ¢å¤ä¸å¢å¼ºï¼ˆä¸ app.js çš„ pulseBomb é…åˆï¼‰ === */

/* å¹³æ»‘åŠ¨ç”»éœ€çš„ hint */
.bombCard{ will-change: transform, box-shadow; }
.bombValue{ will-change: transform, text-shadow; }

/* ä»»ä½•å˜æ›´ï¼šæ›´å¼ºçš„è½»å¼¹ï¼ˆåŠ å‡æˆ–é‡ç½®æ—¶é€šç”¨ï¼‰ */
.bombPulse{
  animation: bombPulse .28s cubic-bezier(.22,.61,.36,1.05);
}
@keyframes bombPulse{
  0%   { transform: scale(.96) }
  60%  { transform: scale(1.03) }
  100% { transform: scale(1) }
}

/* å¢åŠ ç‚¸å¼¹ï¼šä¸ŠæŠ¬ + æŸ”å…‰ */
.boomUp{
  animation:
    bombBumpUp .46s cubic-bezier(.22,.61,.36,1.05),
    bombGlow   .80s ease-out;
}
@keyframes bombBumpUp{
  0%   { transform: translateY(0) scale(1) }
  40%  { transform: translateY(-6px) scale(1.03) }
  100% { transform: translateY(0) scale(1) }
}
@keyframes bombGlow{
  0%   { box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
  50%  { box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 12px 30px rgba(90,20,20,.35), 0 0 22px rgba(255,120,120,.55) }
  100% { box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
}

/* å‡å°‘ç‚¸å¼¹ï¼šè½»æ‘‡åŠ¨ï¼ˆå¸¦æå°æ—‹è½¬ï¼‰ */
.boomDown{
  animation: bombShake .36s cubic-bezier(.36,.07,.19,.97);
}
@keyframes bombShake{
  0%   { transform: translateX(0) rotate(0deg) }
  20%  { transform: translateX(-4px) rotate(-0.6deg) }
  50%  { transform: translateX( 4px) rotate( 0.6deg) }
  80%  { transform: translateX(-3px) rotate(-0.4deg) }
  100% { transform: translateX(0) rotate(0deg) }
}

/* æ•°å­—å¾®åŠ¨ï¼ˆä¸ bombPulse åŒæ—¶è§¦å‘æ—¶æ›´æœ‰å±‚æ¬¡ï¼‰ */
.bombValue.bombPulse{
  animation: valueLift .28s cubic-bezier(.22,.61,.36,1.05);
}
@keyframes valueLift{
  0%   { transform: translateY(0);   text-shadow: none }
  50%  { transform: translateY(-3px); text-shadow: 0 2px 8px rgba(255,180,180,.45) }
  100% { transform: translateY(0);   text-shadow: none }
}

/* å¯é€‰ï¼šæŒ‰é’®äº¤äº’çš„è½»åé¦ˆï¼ˆä¸å½±å“åŠ¨ç”»ï¼‰ */
.bombBtns .btn{
  transition: transform .12s ease, box-shadow .18s ease, opacity .18s ease;
}
.bombBtns .btn:hover{ box-shadow: 0 10px 24px rgba(120,30,30,.34) }
.bombBtns .btn:active{ transform: scale(.98) }

/* é¡¶éƒ¨èµ¢å®¶é€‰æ‹©ï¼šæ ‡ç­¾ + æ‰å¹³æŒ‰é’®ï¼ˆå’Œå…¨å±€ .btn ä¸å†²çªï¼‰ */
.winnerLabel{
  font-size: 14px;
  color: var(--muted);
  margin-right: 8px;
}
#winnerQuick{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}
.winnerBtn{
  background: transparent;
  border-color: var(--line);
  color: var(--ink);
  padding: 8px 12px;
  min-height: 36px;
  border-radius: 999px;
}
.winnerBtn.accent{
  background: #103b27;
  border-color: #1f7b4f;
  color: #d8ffe9;
}

/* è¡¨æ ¼èµ¢å®¶è¡Œï¼šç»¿è‰²æè¾¹ + æ·¡ç»¿åº•ï¼›ç¦ç”¨è¾“å…¥ä¾æ—§æ¸…æ™° */
.winnerRow{
  background: rgba(41,208,118,.08);
}
.winnerRow td{
  border-bottom-color: rgba(41,208,118,.28);
  box-shadow: inset 3px 0 0 rgba(41,208,118,.55); /* å·¦ä¾§ç«–çº¿æ›´ç›´è§‚ */
}
.winnerRow .remainInp:disabled{
  opacity: .95; color: #fff; border-color: rgba(41,208,118,.55);
}

/* èµ¢å®¶ä¹‹åçš„è¡Œï¼šè½»å¾®åŠ æ·±åº•è‰²åŒºåˆ†ï¼ˆä¸æŠ¢çœ¼ï¼‰ */
.afterWinnerRow{
  background: rgba(255,255,255,.015);
}
.afterWinnerRow td{
  border-bottom-color: rgba(180,186,206,.24);
}

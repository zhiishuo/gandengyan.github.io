/* ================= DiamantÃ© Â· ä¸»é¢˜å˜é‡ï¼ˆä¸­æ€§/çŸ³å¢¨ï¼‰ ================= */
:root{
  /* Chrome åŒºï¼ˆé¡¶éƒ¨/åº•éƒ¨æ ã€æµ®åŠ¨æ¡ç­‰æ¡†æ¶å±‚ï¼‰ */
  --chrome-bg: #000000;
  --chrome-bg-blur: rgba(14, 20, 31, 0.95);
  --chrome-line: rgba(27, 33, 80, 0.2);

  /* Content åŒºï¼ˆä¸­é—´é¡µé¢èƒŒæ™¯ + é¢æ¿ï¼‰ */
  --content-bg1: rgba(116, 119, 124, 0.42);
  --content-bg2: #525355;
  --panel: rgba(4, 22, 60, 0.92);
  --line: rgba(255, 255, 255, 0.24);

  /* æ–‡æœ¬ä¸çŠ¶æ€è‰² */
  --ink:#f6f8fb; --muted: #949eac;
  --accent:#29d076; --warn:#ef4444; --info:#58c7f3;

  --shadow: 0 12px 30px rgba(0,0,0,.24);
  --radius: 18px;
  --trans-fast:.18s cubic-bezier(.22,.61,.36,1);
  --trans-slow:.35s cubic-bezier(.22,.61,.36,1);

  /* åº•éƒ¨å°ºå¯¸å˜é‡ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰ */
  --tabbar-h: 80px;
  --tabbar-offset: 18px;

  /* å°è®¡æ¡å°ºå¯¸/å¤–è§‚å˜é‡ */
  --dock-h: 50px;           /* å°è®¡æ¡è§†è§‰é«˜åº¦ */
  --dock-gap: 20px;         /* ä¸åº•éƒ¨æ å‚ç›´é—´è·ï¼ˆå¤‡é€‰ï¼‰ */
  --dock-alpha: .05;        /* å°è®¡æ¡å†…å±‚åŠé€æ˜ */
  --dock-maxw: 560px;       /* æœ€å¤§å®½åº¦ */
  --dock-side-gap: 12px;    /* å°å±ç•™ç™½ */

  /* å°è®¡æ¡åŠ¨ç”»ç»Ÿä¸€å‚æ•° */
  --dock-dur: .32s;
  --dock-ease: cubic-bezier(.22,.61,.36,1);
  --dock-stagger: .06s;     /* ç›¸é‚»æŒ‰é’®é”™ä½ */
  --dock-delay: .04s;       /* æŒ‰é’®æ•´ä½“è¿›å…¥å»¶æ—¶ */
}

*{box-sizing:border-box}
html,body{
  height: 100%;
  overflow: hidden;   /* å…³é”®ï¼šç¦æ­¢ body æ»šåŠ¨ */
}
html,body { touch-action: manipulation; }

html{
  background:
    radial-gradient(1100px 700px at 15% -10%, #10213840 0%, transparent 60%),
    radial-gradient(900px 700px at 105% 0%, #0d263840 0%, transparent 60%),
    linear-gradient(180deg, var(--content-bg1), var(--content-bg2));
  background-color: var(--content-bg1);
  color-scheme: dark;
}
body{
  margin:0; color:var(--ink);
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Inter,Helvetica,Arial;
  background:none;
}

/* ========== é¡¶éƒ¨æ  ========== */
header{
  position:sticky; top:0; z-index:50;
  padding: calc(10px + env(safe-area-inset-top)) 14px 12px;
  border-bottom:1px solid var(--chrome-line);
  background: var(--chrome-bg);
  color: var(--ink);
}
.titleRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
h1{ margin:0; font-size:24px; letter-spacing:.3px }
.badgeMini{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border:1px solid var(--line);
  border-radius:999px; background:#0f1520; font-size:12px;
}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}

.viewport{
  position: relative;
  height: calc(100svh - var(--tabbar-h) - var(--tabbar-offset) - env(safe-area-inset-bottom));
  overflow: hidden;           /* åªè®©é‡Œé¢æ»š */
}

/* å…¼å®¹ä¸æ”¯æŒ svh çš„æµè§ˆå™¨ */
@supports not (height: 100svh){
  .viewport{
    height: calc(100dvh - var(--tabbar-h) - var(--tabbar-offset) - env(safe-area-inset-bottom));
  }
}

/* å†…éƒ¨å®¹å™¨å’Œæ¯é¡µé“ºæ»¡è§†å£é«˜åº¦ï¼Œç”±æ¯é¡µè‡ªå·±æ»šåŠ¨ */
.pages{ height: 97%; }
.page{
  height: 97%;
  max-width: 700px;     /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œæ¯”å¦‚ 720px */
  margin: 0 auto;       /* å±…ä¸­æ˜¾ç¤º */

  overflow: auto;             /* ä»…è¿™é‡Œæ»šåŠ¨ */
  -webkit-overflow-scrolling: touch;
  /* è¿™æ¡ä¿ç•™ï¼šåº•éƒ¨ä¸º Tab + å°è®¡æ¡ é¢„ç•™ç©ºé—´ */
  
}

/* ========== é€šç”¨/é¢æ¿/è¡¨æ ¼/è¾“å…¥ ========== */
.panel{
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:12px; box-shadow: var(--shadow);
}
.panel h2{margin:6px 0 10px; font-size:16px}
.flex{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.pill{font-size:14px; padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:#101723}
input,select,button{
  border-radius:12px; border:1px solid var(--line);
  background: #000000; color:var(--ink);
  padding:12px 14px; font-size:16px;
}
button{cursor:pointer; min-height:44px; transition:transform var(--trans-fast),box-shadow var(--trans-fast)}
button:active{transform:scale(.98)}
.btn{padding:12px 16px}
.btn.accent{ background:#0f2f21; border-color:#227a50; color:#dffbe9 }
.btn.warn{ background:#3a1212; border-color:#6a1d1d; color:#ffd5d5 }
.muted{color:var(--muted); font-size:14px}
table{width:100%; border-collapse:collapse; font-size:16px}
th,td{border-bottom:1px dashed var(--line); padding:10px 6px; text-align:center}
th{color:#e8edf6; font-weight:600}
.name{width:160px}
.num{width:90px; text-align:right}
:focus{ outline:none }
:focus-visible{ outline:2px solid #3b82f6; outline-offset:2px }

/* ========== åº•éƒ¨ Tab ========== */
.tabbar{
  position:fixed; left:26px; right:26px;
  bottom: calc(env(safe-area-inset-bottom) + var(--tabbar-offset));
  z-index:60;
  display:flex; justify-content:space-around; gap:6px;
  height: var(--tabbar-h);
  border-top:1px solid var(--chrome-line);
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(10px);
  border-radius: 24px;
}
.tabbtn{
  flex:1;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px;
  color:#e8eefb;
  font-size:11px;
  min-width:0;
  transition:background var(--trans-fast), border-color var(--trans-fast), color var(--trans-fast);
  padding: 8px 4px;
}
.tabbtn .ico{
  font-size:36px;
  max-height: calc(var(--tabbar-h) - 24px);
  line-height:1;
}
.tabbtn.active{
  background: linear-gradient(180deg,#0e1522,#0c1019);
  border-color:#3e516a;
  color:#ffffff;
}

/* ========== ç‚¸å¼¹å¡ ========== */
.bombCard{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px;
  border-radius:14px;
  background: linear-gradient(180deg,#3a1216,#241014);
  border:1px solid rgba(197, 0, 0, 0.28);
  padding:18px 12px; text-align:center;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 20px rgba(90,20,20,.22);
}
.bombLabel{ font-size:13px; color:#ffd8d8; display:flex; align-items:center; gap:6px; letter-spacing:.2px }
.bombLabel::before{content:"ğŸ’£";}
.bombValue{ font-weight:800; font-size:30px; letter-spacing:.4px; color:#fff2f2 }
.bombBtns .btn{
  min-width:88px; min-height:62px; font-size:22px; font-weight:10; border-radius:18px;
}
#bombDec, #bombInc{ background:#2b0f12; border-color:#7a2d2d; color:#ffe2e2 }
#bombReset{ background:#3a1515; border-color:#a33a3a; color:#ffdede }

/* ========== å°è®¡æµ®æ¡ï¼ˆç»Ÿä¸€åçš„å”¯ä¸€ç‰ˆæœ¬ï¼‰ ========== */
/* å¤–å±‚ï¼šä¸æ¥äº‹ä»¶ï¼Œæ”¾åœ¨åº•æ ä¸Šæ–¹ï¼›å‡ºç°/æ¶ˆå¤±ç»Ÿä¸€èŠ‚å¥ */
.subtotalDock{
  position: fixed;
  left: 50%;
  right: auto;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 12px + env(safe-area-inset-bottom)) !important;
  transform: translateX(-50%) translateY(8px);
  width: min(var(--dock-maxw), calc(100% - var(--dock-side-gap) * 2)) !important;
  z-index: 80 !important;                 /* ä¸€å®šé«˜äº .tabbar(60) */
  pointer-events: none;                   /* å¤–å±‚ä¸æ¥äº‹ä»¶ */
    max-width: var(--dock-maxw);
  opacity: 0;
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease);
}
.subtotalDock.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* å†…å±‚ï¼šå¯ç‚¹å‡»ï¼Œæ ·å¼ä¸è¿‡æ¸¡ */
.subtotalDock .dockInner{
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding:12px 14px;
  border:1px solid var(--chrome-line);
  border-radius:25px;
  background: rgba(16, 24, 36, var(--dock-alpha));
  border-color: var(--surface-tabbar-bd);
  color: var(--ink);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  box-shadow: var(--shadow);
  pointer-events: auto;                   /* å…³é”®ï¼šå…è®¸ç‚¹å‡» */
  transition:
    backdrop-filter var(--dock-dur) var(--dock-ease),
    -webkit-backdrop-filter var(--dock-dur) var(--dock-ease),
    background-color var(--dock-dur) var(--dock-ease);
}

/* å·¦ä¾§æ–‡æ¡ˆï¼ˆä¿æŒåŸæ ·ï¼‰ */
.subtotalDock .dockInner > div{
  font-size:13px; color:#dfe7f6;
}
.subtotalDock .dockInner .mono{
  font-size:20px; font-weight:700; letter-spacing:.2px;
}
#dockPot{ font-size:20px; font-weight:800; }

/* å³ä¾§æŒ‰é’®ç»„ */
.dockActions{
  display:flex; align-items:center; gap:8px;
  margin-left:auto;
  opacity: 0; transform: translateY(4px);
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease);
}
.subtotalDock.show .dockActions{
  opacity: 1; transform: translateY(0);
}

/* é€šç”¨æŒ‰é’®å¤–è§‚ */
.gbtn{
  display:inline-flex; align-items:center; gap:8px;
  min-height:36px; padding:8px 12px;
  border-radius:999px; font-size:14px; font-weight:600;
  border:1px solid var(--line); background:#0f1724; color:var(--ink);
  box-shadow: 0 4px 14px rgba(0,0,0,.16);
  opacity: 0; transform: translateY(8px) scale(.98);
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease),
    box-shadow var(--dock-dur) var(--dock-ease),
    background var(--dock-dur) var(--dock-ease),
    border-color var(--dock-dur) var(--dock-ease);
}
.gbtn:active{ transform: translateY(0) scale(.98); transition-duration:.12s; }
.gbtn.primary{ background:#103b27; border-color:#1f7b4f; color:#d8ffe9 }
.gbtn.ghost{   background:#232222; border-color:var(--line); color:var(--ink) }
.gbtn-ico{ display:inline-grid; place-items:center; width:1em; }

/* ä»…â€œå‡ºç°â€æ—¶åšé”™ä½å»¶æ—¶ï¼›éšè—æ—¶æ— å»¶æ—¶ï¼Œæ•´é½é€€å‡º */
.subtotalDock.show .dockActions .gbtn:nth-child(1){ transition-delay: calc(var(--dock-delay) + 0 * var(--dock-stagger)); }
.subtotalDock.show .dockActions .gbtn:nth-child(2){ transition-delay: calc(var(--dock-delay) + 1 * var(--dock-stagger)); }
.subtotalDock:not(.show) .dockActions .gbtn{ transition-delay: 0s !important; }

.subtotalDock.show .gbtn{ opacity:1; transform: translateY(0) scale(1); }

/* ========== Toast ========== */
.toast{
  position:fixed;
  left:50%;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 24px);
  transform:translateX(-50%) translateY(20px);
  background: rgba(15, 43, 27, 0.95);       /* æé«˜ä¸é€æ˜åº¦ */
  border:1px solid #1b5e38;
  color:#d7ffe9;                            /* æ›´äº®çš„æ–‡å­—è‰² */
  font-weight:600;                          /* åŠ ç²—æ›´æ¸…æ™° */
  text-shadow: 0 1px 2px rgba(0,0,0,.6);    /* æå‡å¯¹æ¯”åº¦ */
  padding:10px 16px;
  border-radius:999px;
  box-shadow: 0 6px 20px rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition:opacity var(--trans-slow), transform var(--trans-slow);
  z-index:1220;                              /* ä¿è¯åœ¨æœ€é¡¶ */
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* ========== æ’åå¡ç‰‡ ========== */
.rankHeader{ text-align:center; margin:4px 0 10px 0 }
.rankHeader h2{ margin:0; font-size:17px; letter-spacing:.4px }
.rankHeader .sub{ margin-top:4px; font-size:12px; color:var(--muted) }
.rankList{ display:flex; flex-direction:column; gap:9px }
.rankCard{
  display:grid; grid-template-columns:56px 1fr auto; gap:20px; align-items:center;
  padding:10px 12px; border:2px solid var(--line); border-radius:14px; background: rgba(104, 56, 56, 0.67);
}
.rankNo{
  width:46px; height:46px; border-radius:12px; display:grid; place-items:center;
  font-weight:700; font-size:24px; color:#0e1116; background: #8c8686;
}
.rankNo.gold{ background:linear-gradient(135deg, #ffffff,#f4b400, #615328); color:#3a2a09 }
.rankNo.silver{ background:linear-gradient(135deg, #ffffff, #b2c0cf, #455e7a); color:#2e3135 }
.rankNo.bronze{ background:linear-gradient(135deg, #eadddd,#d99159, #67442c); color:#2f1d0f }
.rankName{ font-size:19px ;font-weight:600}
.rankScore{
  justify-self:end; font-family:ui-monospace,Menlo,Consolas,monospace;
  font-size:26px; font-weight:800; padding:6px 10px; border-radius:12px;
  background:#0f1520; border:1px solid var(--line);
  letter-spacing:.2px; display:inline-flex; align-items:baseline; gap:4px;
}
.rankScore .unit{ font-size:12px; opacity:.7 }
.rankCard.top .rankScore{ box-shadow:0 4px 16px rgba(0,0,0,.25); background:linear-gradient(180deg,#101826,#0c121c) }
.rankCard.pos .rankScore{ color:#16a34a }
.rankCard.neg .rankScore{ color:#f87171 }
.rankCard.zero .rankScore{ color:#e5e7eb }

/* ========== å…¶å®ƒç»†èŠ‚ ========== */
.remainInp:disabled{ opacity:.6; color:#fff; }

/* ====== å›¾æ ‡ï¼ˆåº•æ ï¼‰ ====== */
.tabbtn .ico{
  width: 32px; height: 32px;
  display: inline-flex; align-items: center; justify-content: center;
}
.tabbtn .ico svg{
  width: 100%; height: 100%;
  stroke: currentColor; fill: none;
  stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
  shape-rendering: geometricPrecision;
}
.tabbtn { color: #cfd7e6; }
.tabbtn.active { color: #ffffff; }

/* ====== å¾®ä¿¡å¼åº•æ å¾®è°ƒï¼ˆä¿ç•™ä½ åŸåå¥½ï¼‰ ====== */
.tabbar{
  padding: 0 6px !important;
  gap: 0 !important;
  background: var(--surface-tabbar) !important;
  border-color: var(--surface-tabbar-bd) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,.28);
}
.tabbtn{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  color: #cfd7e6 !important;
  padding: 6px 2px !important;
  font-size: 12px !important;
  transition: color .18s ease, transform .12s ease !important;
}
.tabbtn::before{ display:none !important; }
.tabbtn.active{
  color: var(--accent) !important;
  background: transparent !important;
  border: none !important;
}
.tabbtn .ico{
  width: 30px !important;
  height: 30px !important;
  line-height: 1 !important;
  filter: none !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}
.tabbtn .ico svg{
  width: 100% !important; height: 100% !important;
  stroke: currentColor !important; fill: none !important;
  stroke-width: 1.8 !important; stroke-linecap: round !important; stroke-linejoin: round !important;
}
@media (hover:hover){
  .tabbtn:hover{ background: transparent !important; }
}
.tabbtn:active{ transform: translateY(1px) scale(.99); }

/* ====== åˆ†å±‚è¡¨é¢è‰²ï¼ˆå¯é€‰å¢å¼ºï¼‰ ====== */
:root{
  --surface-bg:        linear-gradient(180deg, var(--content-bg1), var(--content-bg2));
  --surface-panel: rgba(16, 15, 15, 0.78);
  --surface-panel-bd: rgba(108, 117, 147, 0.24);
  --surface-bomb:      linear-gradient(180deg,#44161b,#2a1013);
  --surface-bomb-bd: rgba(193, 145, 145, 0.34);
  --surface-tabbar: rgba(71, 70, 70, 0.78);
  --surface-tabbar-bd: rgb(140, 139, 139);
  --ink-weak:  #d7e0ef;
  --muted-weak:#9fb0c9;
}
html{ background: var(--surface-bg); }
.panel{
  background: var(--surface-panel) !important;
  border-color: var(--surface-panel-bd) !important;
  box-shadow: 0 12px 30px rgba(53, 53, 57, 0.26);
}
.rankCard{
  background: rgba(53, 53, 62, 0.72);
  border-color: var(--surface-panel-bd);
}
.bombCard{
  background: var(--surface-bomb) !important;
  border-color: var(--surface-bomb-bd) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.04),
    0 10px 26px rgba(70,20,20,.28),
    0 0 0 1px rgba(180, 40, 40, .08);
}
.bombLabel{ color:#ffdede }
.bombValue{ color:#fff4f4 }
.tabbtn{ color: var(--ink-weak) !important; }
.tabbtn.active{ color: var(--accent) !important; text-shadow: 0 0 0 transparent; }

/* ====== Bomb Card åŠ¨æ•ˆï¼ˆä¿ç•™ï¼‰ ====== */
.bombCard{ will-change: transform, box-shadow; }
.bombValue{ will-change: transform, text-shadow; }
.bombPulse{ animation: bombPulse .28s cubic-bezier(.22,.61,.36,1.05); }
@keyframes bombPulse{ 0%{transform:scale(.96)} 60%{transform:scale(1.03)} 100%{transform:scale(1)} }
.boomUp{
  animation:
    bombBumpUp .46s cubic-bezier(.22,.61,.36,1.05),
    bombGlow   .80s ease-out;
}
@keyframes bombBumpUp{ 0%{ transform:translateY(0) scale(1)} 40%{ transform:translateY(-6px) scale(1.03)} 100%{ transform:translateY(0) scale(1)} }
@keyframes bombGlow{
  0%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
  50%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 12px 30px rgba(90,20,20,.35), 0 0 22px rgba(255,120,120,.55) }
  100%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
}
.boomDown{ animation: bombShake .36s cubic-bezier(.36,.07,.19,.97); }
@keyframes bombShake{
  0%{ transform: translateX(0) rotate(0deg) }
  20%{ transform: translateX(-4px) rotate(-.6deg) }
  50%{ transform: translateX( 41px) rotate( .6deg) }
  80%{ transform: translateX(-3px) rotate(-.4deg) }
  100%{ transform: translateX(0) rotate(0deg) }
}
.bombValue.bombPulse{ animation: valueLift .28s cubic-bezier(.22,.61,.36,1.05); }
@keyframes valueLift{
  0%{ transform: translateY(0); text-shadow: none }
  50%{ transform: translateY(-3px); text-shadow: 0 2px 8px rgba(255,180,180,.45) }
  100%{ transform: translateY(0); text-shadow: none }
}

/* ====== èµ¢å®¶è¡Œä¸â€œæ˜¥å¤©â€ç¦ç”¨æ€ ====== */
.winnerLabel{ font-size:16px; color: var(--muted); margin-right:8px; }
#winnerQuick{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.winnerBtn{
  background: transparent; border-color: var(--line); color: var(--ink);
  padding: 8px 12px; min-height: 36px; border-radius: 999px;
}
.winnerBtn.accent{ background:#103b27; border-color:#1f7b4f; color:#d8ffe9; }
.winnerRow{ background: rgba(78, 198, 52, 0.08); }
.winnerRow .remainInp:disabled{ opacity: .95; color:#635e5e; border-color: rgb(55,61,74); }
.winnerRow .springInp:disabled,
.winnerRow .springSelect:disabled,
.winnerRow .springChk:disabled{
  opacity:.95; color:#635e5e; border-color: rgb(55,61,74);
}
.winnerRow .springBadge,
.winnerRow .springBtn{
  filter: grayscale(1);
  opacity: .45;
  pointer-events: none;
}

/* 1) å–æ¶ˆä¸ºå°è®¡æ¡é¢„ç•™çš„å¤§ç©ºéš™ï¼ˆå¦‚æœä½ å‰é¢å®šä¹‰è¿‡ dock-h / dock-gapï¼‰ */
:root{
  --dock-h: 0px !important;
  --dock-gap: 0px !important;
}

/* 2) é¡µé¢çš„åº•éƒ¨åªä¸º Tab é¢„ç•™é«˜åº¦ï¼›ä¸è¦å†é¢å¤–å¤šç•™ç©ºé—´ */
.page{
  padding-bottom: calc(12px + var(--tabbar-h) + env(safe-area-inset-bottom)) !important;
}


/* ================= DiamantÃ© Â· ä¸»é¢˜å˜é‡ï¼ˆä¸­æ€§/çŸ³å¢¨ï¼‰ ================= */
:root{
  /* Chrome åŒºï¼ˆé¡¶éƒ¨/åº•éƒ¨æ ã€æµ®åŠ¨æ¡ç­‰æ¡†æ¶å±‚ï¼‰ */
  --chrome-bg: #000000;
  --chrome-bg-blur: rgba(14, 20, 31, 0.95);
  --chrome-line: rgba(27, 33, 80, 0.2);

  /* Content åŒºï¼ˆä¸­é—´é¡µé¢èƒŒæ™¯ + é¢æ¿ï¼‰ */
  --content-bg1: rgba(158, 155, 155, 0.42);
  --content-bg2: #000000;
  --panel: rgba(4, 221, 60, 0.92);
  --line: rgba(237, 231, 231, 0.24);

  /* æ–‡æœ¬ä¸çŠ¶æ€è‰² */
  --ink:#f6f8fb; --muted: #e0e4ee;
  --accent: #29e37f; --warn:#ef4444; --info:#58c7f3;

  --shadow: 0 12px 30px rgba(0,0,0,.24);
  --radius: 18px;
  --trans-fast:.18s cubic-bezier(.22,.61,.36,1);
  --trans-slow:.35s cubic-bezier(.22,.61,.36,1);

  /* åº•éƒ¨å°ºå¯¸å˜é‡ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰ */
  --tabbar-h: 80px;
  --tabbar-offset: 24px;

  /* å°è®¡æ¡å°ºå¯¸/å¤–è§‚å˜é‡ */
  --dock-h: 50px;           /* å°è®¡æ¡è§†è§‰é«˜åº¦ */
  --dock-gap: 20px;         /* ä¸åº•éƒ¨æ å‚ç›´é—´è·ï¼ˆå¤‡é€‰ï¼‰ */
  --dock-alpha: .45;        /* å°è®¡æ¡å†…å±‚åŠé€æ˜ */
  --dock-maxw: 760px;       /* æœ€å¤§å®½åº¦ */
  --dock-side-gap: 12px;    /* å°å±ç•™ç™½ */

  /* å°è®¡æ¡åŠ¨ç”»ç»Ÿä¸€å‚æ•° */
  --dock-dur: .32s;
  --dock-ease: cubic-bezier(.22,.61,.36,1);
  --dock-stagger: .06s;     /* ç›¸é‚»æŒ‰é’®é”™ä½ */
  --dock-delay: .04s;       /* æŒ‰é’®æ•´ä½“è¿›å…¥å»¶æ—¶ */
}

*{box-sizing:border-box}
html,body{
  height: 100%;
  overflow: hidden;   /* å…³é”®ï¼šç¦æ­¢ body æ»šåŠ¨ */
}
html,body { touch-action: manipulation; }

html{
  background:
    radial-gradient(1100px 700px at 15% -10%, #10213840 0%, transparent 60%),
    radial-gradient(900px 700px at 105% 0%, #0d263840 0%, transparent 60%),
    linear-gradient(180deg, var(--content-bg1), var(--content-bg2));
  background-color: var(--content-bg1);
  color-scheme: dark;
}
body{
  margin:0; color:var(--ink);
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Inter,Helvetica,Arial;
  background:none;
}

/* ========== é¡¶éƒ¨æ  ========== */
header{
  position:sticky; top:0; z-index:50;
  padding: calc(10px + env(safe-area-inset-top)) 14px 12px;
  border-bottom:1px solid var(--chrome-line);
  background: var(--chrome-bg);
  color: var(--ink);
}
.titleRow{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
h1{ margin:0; font-size:24px; letter-spacing:.3px }
.badgeMini{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border:1px solid var(--line);
  border-radius:999px; background:#0f1520; font-size:12px;
}
.mono{font-family:ui-monospace,Menlo,Consolas,monospace}

.viewport{
  position: relative;
  height: calc(120svh - var(--tabbar-h) - var(--tabbar-offset) - env(safe-area-inset-bottom));
  overflow: hidden;           /* åªè®©é‡Œé¢æ»š */
}

/* å…¼å®¹ä¸æ”¯æŒ svh çš„æµè§ˆå™¨ */
@supports not (height: 100svh){
  .viewport{
    height: calc(100dvh - var(--tabbar-h) - var(--tabbar-offset) - env(safe-area-inset-bottom));
  }
}

/* å†…éƒ¨å®¹å™¨å’Œæ¯é¡µé“ºæ»¡è§†å£é«˜åº¦ï¼Œç”±æ¯é¡µè‡ªå·±æ»šåŠ¨ */
.pages{ height: 100%; }
.page{
  height: 100%;

  margin: 0 auto;       /* å±…ä¸­æ˜¾ç¤º */

  overflow: auto;             /* ä»…è¿™é‡Œæ»šåŠ¨ */
  -webkit-overflow-scrolling: touch;
  /* è¿™æ¡ä¿ç•™ï¼šåº•éƒ¨ä¸º Tab + å°è®¡æ¡ é¢„ç•™ç©ºé—´ */

}

/* ========== é€šç”¨/é¢æ¿/è¡¨æ ¼/è¾“å…¥ ========== */
.panel{
  background: var(--panel);
  border:1px solid var(--line);
  border-radius: var(--radius);
  padding:12px; box-shadow: var(--shadow);
}
.panel h2{margin:16px 0 10px; font-size:26px}
.flex{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.pill{font-size:14px; padding:6px 10px; border:1px solid var(--line); border-radius:999px; background:#101723}
input,select,button{
  border-radius:12px; border:1px solid var(--line);
  background: #000000; color:var(--ink);
  padding:12px 14px; font-size:16px;
}
button{cursor:pointer; min-height:44px; transition:transform var(--trans-fast),box-shadow var(--trans-fast)}
button:active{transform:scale(.98)}
.btn{padding:12px 16px}
.btn.accent{ background:#0f2f21; border-color:#227a50; color:#dffbe9 }
.btn.warn{ background:#3a1212; border-color:#6a1d1d; color:#ffd5d5 }
.muted{color:var(--muted); font-size:14px}
table{width:100%; border-collapse:collapse; font-size:16px}
th,td{border-bottom:1px dashed var(--line); padding:10px 6px; text-align:center}
th{color:#e8edf6; font-weight:600}
.name{width:160px}
.num{width:90px; text-align:right}
:focus{ outline:none }
:focus-visible{ outline:2px solid #3b82f6; outline-offset:2px }

/* é¢„è§ˆåˆ—æ ·å¼ */
.previewCell{ text-align:center; }
.previewVal{ font-weight:800; letter-spacing:.2px; }
.previewVal.pos{ color:#16a34a; }   /* æ­£æ•°ï¼šç»¿ */
.previewVal.neg{ color:#f87171; }   /* è´Ÿæ•°ï¼šçº¢ */
.previewVal.zero{ color:#cbd5e1; }  /* 0ï¼šç° */

/* ========== åº•éƒ¨ Tab ========== */
.tabbar{
  position:fixed; left:26px; right:26px;
  bottom: calc(env(safe-area-inset-bottom) + var(--tabbar-offset));
  z-index:60;
  display:flex; justify-content:space-around; gap:6px;
  height: var(--tabbar-h);
  border-top:1px solid var(--chrome-line);
  background: var(--chrome-bg-blur);
  backdrop-filter: blur(10px);
  border-radius: 24px;
}
.tabbtn{
  flex:1;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:4px;
  color:#e8eefb;
  font-size:11px;
  min-width:0;
  transition:background var(--trans-fast), border-color var(--trans-fast), color var(--trans-fast);
  padding: 8px 4px;
}
.tabbtn .ico{
  font-size:36px;
  max-height: calc(var(--tabbar-h) - 24px);
  line-height:1;
}
.tabbtn.active{
  background: linear-gradient(180deg,#0e1522,#0c1019);
  border-color:#3e516a;
  color:#ffffff;
}

/* ========== ç‚¸å¼¹å¡ ========== */
.bombCard{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:18px;
  border-radius:34px;
  background: linear-gradient(180deg,#3a1216,#241014);
  border:2px solid rgba(197, 0, 0, 0.28);
  padding:24px 12px; text-align:center;
    padding-top:42px ;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 20px rgba(90,20,20,.22);
}
.bombLabel{ font-size:13px; color:#ffd8d8; display:flex; align-items:center; gap:6px; letter-spacing:.2px }
.bombLabel::before{content:"ğŸ’£";}
.bombValue{ font-weight:800; font-size:32px; letter-spacing:.4px; color:#fff2f2 }
.bombBtns .btn{
  min-width:98px; min-height:72px; font-size:26px; font-weight:800; border-radius:100px;
}
#bombDec, #bombInc{ background:#2b0f12; border-color:#7a2d2d; color:#ffe2e2 }
#bombReset{ background:#3a1515; border-color:#a33a3a; color:#ffdede ; margin-inline-end: 30px;}


/* â€”â€” Bomb buttons: make +/- circular, keep Reset pill â€”â€” */
.bombBtns{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

/* åœ†å½¢æŒ‰é’®ï¼š+ / - */
#bombDec,
#bombInc{
  /* è¦†ç›–é€šç”¨æŒ‰é’®çš„æœ€å°å°ºå¯¸ï¼Œç¡®ä¿æ˜¯æ­£åœ† */
  width: 74px;
  height: 74px;
  min-width: 0;
  min-height: 0;
  padding: 0;

  border-radius: 999px;
  display: inline-grid;
  place-items: center;

  /* å¼ºåŒ– +/- ç¬¦å·çš„è§†è§‰æƒé‡ */
  font-size: 38px;
  line-height: 1;
  font-weight: 900;
  letter-spacing: -2px;
  text-shadow: 0 1px 6px rgba(255, 210, 210, .25);

  /* ç«‹ä½“æ„Ÿä¸è¿‡æ¸¡ */
  box-shadow: 0 6px 18px rgba(0,0,0,.28), inset 0 0 0 1px rgba(255,255,255,.04);
  transition: transform .12s ease, box-shadow .18s ease, filter .18s ease;
}

/* ç‚¹å‡»åé¦ˆ */
#bombDec:active,
#bombInc:active{
  transform: translateY(1px) scale(.98);
  box-shadow: 0 4px 12px rgba(0,0,0,.24), inset 0 0 0 1px rgba(255,255,255,.03);
}

/* ç»†å¾®çš„è‰²å·®ï¼Œè®©ä¸¤è€…ä¸€çœ¼å¯åˆ†ï¼ˆå¯æŒ‰å–œå¥½è°ƒï¼‰ */
#bombInc{
  background: #2d1216;   /* æ¯”å‡å·ç•¥äº®ä¸€ç‚¹ */
  border-color: #8a3434;
}
#bombDec{
  background: #230d10;
  border-color: #6f2a2a;
}

/* é‡ç½®ç»´æŒèƒ¶å›Šå½¢çŠ¶ï¼Œä»…ç•¥å¾®å¢å¼ºå¯è¯»æ€§ */
#bombReset{
  padding: 12px 18px;          /* ä¿æŒåŸå½¢çŠ¶ */
  font-weight: 800;
  letter-spacing: .2px;
  text-shadow: 0 1px 4px rgba(255, 220, 220, .18);
}

/* å¯è¾¾æ€§ï¼šé”®ç›˜ç„¦ç‚¹é«˜äº® */
#bombDec:focus-visible,
#bombInc:focus-visible,
#bombReset:focus-visible{
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* å°å±æ—¶ç•¥ç¼©å°ºå¯¸ï¼Œä»ä¿æŒæ­£åœ†ä¸æ¸…æ™°åº¦ */
@media (max-width: 380px){
  #bombDec, #bombInc{ width: 66px; height: 66px; font-size: 34px; }
}

/* ========== å°è®¡æµ®æ¡ï¼ˆç»Ÿä¸€åçš„å”¯ä¸€ç‰ˆæœ¬ï¼‰ ========== */
/* å¤–å±‚ï¼šä¸æ¥äº‹ä»¶ï¼Œæ”¾åœ¨åº•æ ä¸Šæ–¹ï¼›å‡ºç°/æ¶ˆå¤±ç»Ÿä¸€èŠ‚å¥ */
.subtotalDock{
  position: fixed;
  left: 50%;
  right: auto;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 12px + env(safe-area-inset-bottom)) !important;
  transform: translateX(-50%) translateY(8px);
  width: min(var(--dock-maxw), calc(100% - var(--dock-side-gap) * 2)) !important;
  z-index: 80 !important;                 /* ä¸€å®šé«˜äº .tabbar(60) */
  pointer-events: none;                   /* å¤–å±‚ä¸æ¥äº‹ä»¶ */
    max-width: var(--dock-maxw);
  opacity: 0;
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease);
}
.subtotalDock.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* å†…å±‚ï¼šå¯ç‚¹å‡»ï¼Œæ ·å¼ä¸è¿‡æ¸¡ */
.subtotalDock .dockInner{
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  padding:12px 14px;
  border:1px solid var(--chrome-line);
  border-radius:25px;
  background: rgba(163, 23, 23, 0.07);
  border-color: var(--surface-tabbar-bd);
  color: var(--ink);
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  box-shadow: var(--shadow);
  pointer-events: auto;                   /* å…³é”®ï¼šå…è®¸ç‚¹å‡» */
  transition:
    backdrop-filter var(--dock-dur) var(--dock-ease),
    -webkit-backdrop-filter var(--dock-dur) var(--dock-ease),
    background-color var(--dock-dur) var(--dock-ease);
}

/* å·¦ä¾§æ–‡æ¡ˆï¼ˆä¿æŒåŸæ ·ï¼‰ */
.subtotalDock .dockInner > div{
  font-size:15px; color:#dfe7f6;
}
.subtotalDock .dockInner .mono{
  font-size:18px; font-weight:700; letter-spacing:.2px;
}
#dockPot{ font-size:20px; font-weight:800; }

/* åªæŠŠå°è®¡æ¡é‡Œçš„â€œé¢„è®¡è¿›è´¦â€æ•°å­—æ”¹æˆç»¿è‰² */
.subtotalDock .dockInner #dockPot{
  color: var(--accent);      /* æˆ–è€…æ¢æˆå›ºå®šå€¼ï¼š#16a34a */
}

/* å¦‚æœæƒ³æ›´çªå‡ºä¸€ç‚¹ï¼Œå†ç»™æ•°å­—åŠ ä¸ªå¾®å¼±å‘å…‰ä¸åŠ ç²— */
.subtotalDock .dockInner #dockPot{
  font-weight: 800;
  text-shadow: 0 1px 6px rgba(22,163,74,.25);
}

/* å³ä¾§æŒ‰é’®ç»„ */
.dockActions{
  display:flex; align-items:center; gap:8px;
  margin-left:auto;
  opacity: 0; transform: translateY(4px);
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease);
}
.subtotalDock.show .dockActions{
  opacity: 1; transform: translateY(0);
}

/* é€šç”¨æŒ‰é’®å¤–è§‚ */
.gbtn{
  display:inline-flex; align-items:center; gap:8px;
  min-height:42px; padding:12px 16px;
  border-radius:999px; font-size:14px; font-weight:800;
  border:1px solid var(--line); background:#0f1724; color:var(--ink);
  box-shadow: 0 4px 14px rgba(0,0,0,.16);
  opacity: 0; transform: translateY(8px) scale(.98);
  transition:
    opacity var(--dock-dur) var(--dock-ease),
    transform var(--dock-dur) var(--dock-ease),
    box-shadow var(--dock-dur) var(--dock-ease),
    background var(--dock-dur) var(--dock-ease),
    border-color var(--dock-dur) var(--dock-ease);
}
.gbtn:active{ transform: translateY(0) scale(.98); transition-duration:.12s; }
/* å…¥è´¦æŒ‰é’®æ›´å¤§ã€æ›´é²œè‰³ + å‘¼å¸å‘å…‰ï¼ˆç»¿è‰²ç‰ˆæœ¬ï¼‰ */
.gbtn.primary {
  background: linear-gradient(180deg, #199747, #15803d); /* é²œç»¿è‰²æ¸å˜ */
  border-color: #16a34a;
  color: #ffffff;
  font-size: 24px;
  padding: 11px 24px;
  min-height: 44px;
  border-radius: 999px;
  font-weight: 600;
  letter-spacing: .3px;

  /* å…‰æ™•æ•ˆæœï¼šç»¿è‰²ä¸»è°ƒ */
  box-shadow: 0 0 14px rgba(34,197,94,.55),
              0 0 28px rgba(22,163,74,.35);

  /* å‘¼å¸åŠ¨ç”» */
  animation: incomePulseGreen 2.4s ease-in-out infinite;
  transition: transform .15s ease, box-shadow .2s ease;
}

/* å‘¼å¸å¼å‘å…‰å…³é”®å¸§ï¼ˆç»¿è‰²ç‰ˆï¼‰ */
@keyframes incomePulseGreen {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 14px rgba(34,197,94,.55),
                0 0 28px rgba(22,163,74,.35);
  }
  50% {
    transform: scale(1.06);
    box-shadow: 0 0 22px rgba(34,197,94,.75),
                0 0 44px rgba(22,163,74,.45);
  }
}

/* æ‚¬åœå’Œç‚¹å‡»çŠ¶æ€ */
@media (hover:hover){
  .gbtn.primary:hover {
    transform: scale(1.08);
    box-shadow: 0 0 24px rgba(34,197,94,.85),
                0 0 48px rgba(22,163,74,.55);
  }
}
/* ç‚¹å‡»æ—¶çš„è¶£å‘³å¼¹è·³åŠ¨ç”» */
.gbtn.primary:active {
  animation: incomeClick .35s cubic-bezier(.25,.8,.4,1);
}

/* ç‚¹å‡»åŠ¨ç”»å…³é”®å¸§ */
@keyframes incomeClick {
  0% {
    transform: scale(1);
    box-shadow: 0 0 14px rgba(34,197,94,.55),
                0 0 28px rgba(22,163,74,.35);
  }
  40% {
    transform: scale(0.92);  /* å…ˆç¼©å°ä¸€ç‚¹ */
    box-shadow: 0 0 10px rgba(34,197,94,.45),
                0 0 20px rgba(22,163,74,.25);
  }
  70% {
    transform: scale(1.08);  /* å†å¿«é€Ÿæ”¾å¤§ */
    box-shadow: 0 0 24px rgba(34,197,94,.75),
                0 0 44px rgba(22,163,74,.45);
  }
  100% {
    transform: scale(1);  /* æœ€ç»ˆå›åˆ°æ­£å¸¸å¤§å° */
    box-shadow: 0 0 14px rgba(34,197,94,.55),
                0 0 28px rgba(22,163,74,.35);
  }
}
.gbtn.ghost{   background:#232222; border-color:var(--line); color:var(--ink) }
.gbtn-ico{ display:inline-grid; place-items:center; width:1em; }

/* ä»…â€œå‡ºç°â€æ—¶åšé”™ä½å»¶æ—¶ï¼›éšè—æ—¶æ— å»¶æ—¶ï¼Œæ•´é½é€€å‡º */
.subtotalDock.show .dockActions .gbtn:nth-child(1){ transition-delay: calc(var(--dock-delay) + 0 * var(--dock-stagger)); }
.subtotalDock.show .dockActions .gbtn:nth-child(2){ transition-delay: calc(var(--dock-delay) + 1 * var(--dock-stagger)); }
.subtotalDock:not(.show) .dockActions .gbtn{ transition-delay: 0s !important; }

.subtotalDock.show .gbtn{ opacity:1; transform: translateY(0) scale(1); }

/* ========== Toast ========== */
.toast{
  position:fixed;
  left:50%;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 24px);
  transform:translateX(-50%) translateY(20px);
  background: rgba(15, 43, 27, 0.95);       /* æé«˜ä¸é€æ˜åº¦ */
  border:1px solid #1b5e38;
  color:#d7ffe9;                            /* æ›´äº®çš„æ–‡å­—è‰² */
  font-weight:600;                          /* åŠ ç²—æ›´æ¸…æ™° */
  text-shadow: 0 1px 2px rgba(0,0,0,.6);    /* æå‡å¯¹æ¯”åº¦ */
  padding:10px 16px;
  border-radius:999px;
  box-shadow: 0 6px 20px rgba(0,0,0,.35);
  opacity:0;
  pointer-events:none;
  transition:opacity var(--trans-slow), transform var(--trans-slow);
  z-index:1220;                              /* ä¿è¯åœ¨æœ€é¡¶ */
}
.toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* ========== æ’åå¡ç‰‡ ========== */

/* Header æ›´æœ‰å±‚çº§ */
.rankHeader{
  text-align: center;
  margin: 4px 0 14px;
}
.rankHeader h2{
  margin: 0;
  font-size: 20px;
  letter-spacing: .4px;
  font-weight: 800;
}
.rankHeader .sub{
  margin-top: 6px;
  font-size: 18px;
  color: var(--muted);
}
/* åˆ—è¡¨é—´è·æ›´ç´§å‡‘ï¼Œä½†å¯è¯» */
.rankList{
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.rankCard{
  display:grid; grid-template-columns:56px 1fr auto; gap:20px; align-items:center;
  padding:10px 12px; border:2px solid var(--line); border-radius:14px; background: rgba(104, 56, 56, 0.67);
}
/* å·¦ä¾§åæ¬¡å¾½ç« ï¼šæ›´åƒå¥–ç‰Œ */
.rankNo{
  width: 52px;
  height: 52px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  font-weight: 700;
  font-size: 27px;
  color: #0e1116;
  background: #c5c9d3;
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 4px 10px rgba(0,0,0,.25);
}
.rankNo.gold{
  background: radial-gradient(120% 120% at 30% 20%, #fff 0%, #f7d778 35%, #c49a2f 70%);
  color:#3a2a09;
}
.rankNo.silver{
  background: radial-gradient(120% 120% at 30% 20%, #fff 0%, #cdd6e2 40%, #7b8aa0 75%);
  color:#2e3135;
}
.rankNo.bronze{
  background: radial-gradient(120% 120% at 30% 20%, #ffe8d8 0%, #e3a070 40%, #8a5b36 75%);
  color:#2f1d0f;
}


/* åå­—åŒºï¼šæº¢å‡ºçœç•¥ã€å¯¹é½å¥½ */
.rankName{
  font-size: 18px;
  font-weight: 700;
  letter-spacing: .2px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* å³ä¾§åˆ†æ•°ï¼šå¯¹é½ã€åˆ†å•ä½åˆ†å±‚çº§ */
.rankScore{
  justify-self: end;
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 12px;
  background: #0f1520;
  border: 1px solid var(--surface-panel-bd);
  font-family: ui-monospace, Menlo, Consolas, monospace;
  font-size: 24px;
  font-weight: 900;
  letter-spacing: .2px;
  box-shadow: 0 4px 14px rgba(0,0,0,.18);
  min-width: 120px;          /* é¿å…è·³åŠ¨ */
  text-align: right;
}
.rankScore .unit{
  font-size: 12px;
  opacity: .7;
}

/* åˆ†æ•°æ­£è´Ÿé…è‰²ï¼ˆæ›´æ¸…æ™°ï¼Œä½†ä¸è¿‡é¥±å’Œï¼‰ */
.rankCard.pos .rankScore{ color: #22c55e; }  /* ç»¿ */
.rankCard.neg .rankScore{ color: #f87171; }  /* çº¢ */
.rankCard.zero .rankScore{ color: #cfd7e6; } /* ç° */

/* ========== ç´§å‡‘å“åº”å¼ ========== */
@media (max-width: 380px){
  .rankCard{ --pad-x: 10px; gap: 10px; }
  .rankNo{ width: 48px; height: 48px; font-size: 20px; }
  .rankName{ font-size: 16px; }
  .rankScore{ font-size: 22px; padding: 6px 8px; min-width: 104px; }
}

/* ========== ç¬¬ä¸€åè½»å¾®å‘¼å¸æ•ˆæœï¼ˆå¯å…³æ‰å°±åˆ æ‰è¿™æ®µï¼‰ ========== */
.rankList > .rankCard:first-child{
  animation: topBreath 2.8s ease-in-out infinite;
}
@keyframes topBreath{
  0%,100%{ box-shadow: 0 8px 28px rgba(0,0,0,.28), 0 0 0 1px rgba(240,180,80,.08) inset; }
  50%    { box-shadow: 0 12px 36px rgba(0,0,0,.34), 0 0 0 1px rgba(240,180,80,.16) inset; }
}

/* ========== å…¶å®ƒç»†èŠ‚ ========== */
.remainInp:disabled{ opacity:.6; color:#fff; }

/* ====== å›¾æ ‡ï¼ˆåº•æ ï¼‰ ====== */
.tabbtn .ico{
  width: 32px; height: 32px;
  display: inline-flex; align-items: center; justify-content: center;
}
.tabbtn .ico svg{
  width: 100%; height: 100%;
  stroke: currentColor; fill: none;
  stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
  shape-rendering: geometricPrecision;
}
.tabbtn { color: #cfd7e6; }
.tabbtn.active { color: #ffffff; }

/* ====== å¾®ä¿¡å¼åº•æ å¾®è°ƒï¼ˆä¿ç•™ä½ åŸåå¥½ï¼‰ ====== */
.tabbar{
  padding: 0 6px !important;
  gap: 0 !important;
  background: var(--surface-tabbar) !important;
  border-color: var(--surface-tabbar-bd) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,.28);
}
.tabbtn{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  color: #cfd7e6 !important;
  padding: 6px 2px !important;
  font-size: 12px !important;
  transition: color .18s ease, transform .12s ease !important;
}
.tabbtn::before{ display:none !important; }
.tabbtn.active{
  color: var(--accent) !important;
  background: transparent !important;
  border: none !important;
}
.tabbtn .ico{
  width: 30px !important;
  height: 30px !important;
  line-height: 1 !important;
  filter: none !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
}
.tabbtn .ico svg{
  width: 100% !important; height: 100% !important;
  stroke: currentColor !important; fill: none !important;
  stroke-width: 1.8 !important; stroke-linecap: round !important; stroke-linejoin: round !important;
}
@media (hover:hover){
  .tabbtn:hover{ background: transparent !important; }
}
.tabbtn:active{ transform: translateY(1px) scale(.99); }

/* ====== åˆ†å±‚è¡¨é¢è‰²ï¼ˆå¯é€‰å¢å¼ºï¼‰ ====== */
:root{
  --surface-bg:        linear-gradient(180deg, var(--content-bg1), var(--content-bg2));
  --surface-panel: rgba(16, 15, 15, 0.78);
  --surface-panel-bd: rgba(108, 117, 147, 0.24);
  --surface-bomb:      linear-gradient(180deg,#44161b,#2a1013);
  --surface-bomb-bd: rgba(193, 145, 145, 0.34);
  --surface-tabbar: rgba(77, 76, 85, 0.3);
  --surface-tabbar-bd: rgb(140, 139, 139);
  --ink-weak:  #d7e0ef;
  --muted-weak:#9fb0c9;
}
html{ background: var(--surface-bg); }
.panel{
  background: var(--surface-panel) !important;
  border-color: var(--surface-panel-bd) !important;
  box-shadow: 0 12px 30px rgba(53, 53, 57, 0.26);
}
.rankCard{
  background: rgba(53, 53, 62, 0.72);
  border-color: var(--surface-panel-bd);
}
.bombCard{
  background: var(--surface-bomb) !important;
  border-color: var(--surface-bomb-bd) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.04),
    0 10px 26px rgba(70,20,20,.28),
    0 0 0 1px rgba(180, 40, 40, .08);
}

.tabbtn{ color: var(--ink-weak) !important; }
.tabbtn.active{ color: var(--accent) !important; text-shadow: 0 0 0 transparent; }

/* ====== Bomb Card åŠ¨æ•ˆï¼ˆä¿ç•™ï¼‰ ====== */
.bombCard{ will-change: transform, box-shadow; }
.bombValue{ will-change: transform, text-shadow; }
.bombPulse{ animation: bombPulse .28s cubic-bezier(.22,.61,.36,1.05); }
@keyframes bombPulse{ 0%{transform:scale(.96)} 60%{transform:scale(1.03)} 100%{transform:scale(1)} }
.boomUp{
  animation:
    bombBumpUp .46s cubic-bezier(.22,.61,.36,1.05),
    bombGlow   .80s ease-out;
}
@keyframes bombBumpUp{ 0%{ transform:translateY(0) scale(1)} 40%{ transform:translateY(-6px) scale(1.03)} 100%{ transform:translateY(0) scale(1)} }
@keyframes bombGlow{
  0%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
  50%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 12px 30px rgba(90,20,20,.35), 0 0 22px rgba(255,120,120,.55) }
  100%{ box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 8px 24px rgba(90,20,20,.28), 0 0 0 rgba(255,120,120,0) }
}
/* ä¸‹é™æ—¶çš„è½»å¾®æŠ–åŠ¨ï¼ˆæ›´å…‹åˆ¶ï¼‰ */
 .boomDown{
   animation: bombShake .26s cubic-bezier(.36,.07,.19,.97);
 }

/* === Card-level pulses used by JS (cardPulseUp / cardPulseDown / cardPulse) === */
.bombCard.cardPulseUp   { animation: cardPulseUp .32s ease-out; }
.bombCard.cardPulseDown { animation: cardPulseDown .24s ease-out; }
.bombCard.cardPulse     { animation: cardPulse .28s ease-out; }

@keyframes cardPulseUp {
  0%   { transform: translateZ(0) scale(1); }
  45%  { transform: translateZ(0) scale(1.04); }
  100% { transform: translateZ(0) scale(1); }
}
@keyframes cardPulseDown {
  0%   { transform: translateZ(0) scale(1); }
  50%  { transform: translateZ(0) scale(0.97); }
  100% { transform: translateZ(0) scale(1); }
}
@keyframes cardPulse {
  0%   { transform: translateZ(0) scale(1); }
  50%  { transform: translateZ(0) scale(1.04); }
  100% { transform: translateZ(0) scale(1); }
}

/* === Missing keyframes for .boomDown (was referencing bombShake) === */
@keyframes bombShake{
  0%   { transform: translateX(0) translateY(0)   scale(1); }
  25%  { transform: translateX(-1px) translateY(1px)  scale(0.996); }
  50%  { transform: translateX(1px)  translateY(-1px) scale(1.004); }
  75%  { transform: translateX(-1px) translateY(-1px) scale(0.998); }
  100% { transform: translateX(0) translateY(0)   scale(1); }
}

/* ====== èµ¢å®¶è¡Œä¸â€œæ˜¥å¤©â€ç¦ç”¨æ€ ====== */
.winnerLabel{ font-size:16px; color: var(--muted); margin-right:8px; }
#winnerQuick{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
.winnerBtn{
  background: transparent; border-color: var(--line); color: var(--ink);
  padding: 12px 14px; min-height: 36px; border-radius: 999px;
}
.winnerBtn.accent{ background:#103b27; border-color:#1f7b4f; color:#d8ffe9; }
.winnerRow{ background: rgba(78, 198, 52, 0.08); }
.winnerRow .remainInp:disabled{ opacity: .95; color:#635e5e; border-color: rgb(55,61,74); }
.winnerRow .springInp:disabled,
.winnerRow .springSelect:disabled,
.winnerRow .springChk:disabled{
  opacity:.95; color:#635e5e; border-color: rgb(55,61,74);
}
.winnerRow .springBadge,
.winnerRow .springBtn{
  filter: grayscale(1);
  opacity: .45;
  pointer-events: none;
}

/* åªç»™ emoji è‡ªå·±åšåŠ¨ç”»ï¼Œé¿å…å½±å“çˆ¶çº§å¡ç‰‡çš„åŠ¨ç”» */
#bombIcon{
  display:inline-block;
  font-size:24px;
  margin-right:6px;
  transform-origin:center center;
  will-change: transform, filter, opacity;
  --bombScale: 1;   /* JS ä¼šè®¾ç½® */
  --shakeDur: .28s; /* æŠ–åŠ¨å‘¨æœŸ */
}

/* æŠ–åŠ¨ï¼ˆå¸¸é©»ï¼‰â€”â€” æ³¨æ„ä»…ä½œç”¨äº #bombIconï¼Œä¸ä¼šè¦†ç›– .bombCard çš„åŠ¨ç”» */
@keyframes bombIconShake {
  0%   { transform: translate(0,0)           rotate(0deg)  scale(var(--bombScale)); }
  25%  { transform: translate(-1px, 1px)     rotate(-6deg) scale(var(--bombScale)); }
  50%  { transform: translate( 1px,-1px)     rotate(6deg)  scale(var(--bombScale)); }
  75%  { transform: translate(-1px,-1px)     rotate(-4deg) scale(var(--bombScale)); }
  100% { transform: translate( 1px, 1px)     rotate(4deg)  scale(var(--bombScale)); }
}
.bombShaking{ animation: bombIconShake var(--shakeDur) infinite; }

/* é˜¶æ®µæ•ˆæœï¼šçº¢è‰²è¾‰å…‰ + æ›´å¿«æŠ–åŠ¨ + é—ªçƒ */
.stage1{ --shakeDur:.28s; filter: drop-shadow(0 0 0 rgba(255,0,0,0)); }
.stage2{ --shakeDur:.20s; filter: drop-shadow(0 0 4px rgba(255,80,80,.7)) drop-shadow(0 0 10px rgba(255,120,120,.45)); }
@keyframes bombBlink { 0%{opacity:1} 100%{opacity:.65} }
.stage3{
  --shakeDur:.14s;
  filter: drop-shadow(0 0 6px rgba(255,60,60,.9)) drop-shadow(0 0 16px rgba(255,120,120,.6));
  animation: bombIconShake var(--shakeDur) infinite, bombBlink .55s infinite alternate;
}

/* â€”â€” Enhancements: make +/- more prominent with hover glow, tap pop, and ripple â€”â€” */

/* è§†è§‰æƒé‡ & è´¨æ„Ÿï¼šæ›´ç²—è¾¹ã€æ›´é¥±å’Œã€å åŠ é«˜å…‰æ¸å˜ */
#bombDec,
#bombInc{
  position: relative;                  /* ä¾›æ¶Ÿæ¼ªå®šä½ */
  border-width: 2px;
  background-image:
    radial-gradient(160% 120% at 50% -30%, rgba(209, 30, 30, 0.06), transparent 50%),
    linear-gradient(180deg, rgba(255,120,120,.10), rgba(0,0,0,0));
  filter: saturate(1.06) contrast(1.06);
  color: #ffffff;
  text-shadow: 0 2px 8px rgba(255, 160, 160, .35);
}

/* â€œ+â€ æ¯” â€œâˆ’â€ ç•¥äº®ï¼ŒåŒºåˆ†ä¸€çœ¼å¯è§ */
#bombInc{
  background-color: rgba(152, 63, 40, 0.34);      /* å¢å¼ºäº®åº¦ */
  border-color: #ba4444;
}
#bombDec{
  background-color: rgb(92, 35, 28);
  border-color: #bb3d3d;
}

/* Hover / Focusï¼šè½»æµ®èµ· + æŸ”å…‰ */
@media (hover:hover){
  #bombDec:hover,
  #bombInc:hover{
    box-shadow:
      0 10px 28px rgba(0,0,0,.35),
      0 0 14px rgba(255, 140, 140, .30),
      inset 0 0 0 1px rgba(255,255,255,.06);
    transform: translateY(-1px) scale(1.015);
  }
}
#bombDec:focus-visible,
#bombInc:focus-visible{
  box-shadow:
    0 10px 28px rgba(0,0,0,.35),
    0 0 14px rgba(88, 199, 243, .24),
    inset 0 0 0 1px rgba(255,255,255,.06);
}

/* Tap Popï¼šæŒ‰ä¸‹çš„å¾®å¼¹è·³ï¼ˆæ¯”åŸæœ¬ :active æ›´æœ‰å­˜åœ¨æ„Ÿï¼‰ */
#bombDec:active,
#bombInc:active{
  animation: btnTap .22s cubic-bezier(.22,.61,.36,1);
}
@keyframes btnTap{
  0%   { transform: translateY(1px) scale(.98); }
  60%  { transform: translateY(0)   scale(1.03); }
  100% { transform: translateY(0)   scale(1.00); }
}

/* Rippleï¼šç‚¹å‡»æ—¶çš„æ·¡æ·¡æ¶Ÿæ¼ª */
#bombDec::after,
#bombInc::after{
  content:'';
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background: radial-gradient(40% 40% at center, rgba(255,200,200,.30), rgba(255,120,120,.00) 70%);
  opacity: 0;
  transform: scale(.6);
  transition: opacity .24s ease, transform .24s ease;
  pointer-events: none;
}
#bombDec:active::after,
#bombInc:active::after{
  opacity: 1;
  transform: scale(1.1);
}

/*ï¼ˆå¯é€‰ï¼‰å½“æœ‰ç‚¸å¼¹æ—¶è®©æŒ‰é’®è½»å¾®â€œå‘¼å¸â€ï¼Œä¸å¡ç‰‡å‘å…‰å‘¼åº” */
.bombCard.bombGlowing #bombInc,
.bombCard.bombGlowing #bombDec{
  animation: btnBreath 2.8s ease-in-out infinite;
}
@keyframes btnBreath{
  0%,100% { filter: saturate(1.02) brightness(1.00); }
  50%     { filter: saturate(1.10) brightness(1.04); }
}


/* ====== Players table row numbering (no JS change needed) ====== */
/* Use CSS counters to render 1,2,3... before the first cell in each row of #playersBody */
.page[data-page="players"] #playersBody{ counter-reset: playerRow; }
.page[data-page="players"] #playersBody tr{ counter-increment: playerRow; }

/* Reserve space on the first cell and draw the index badge */
.page[data-page="players"] #playersBody td:first-child{
  position: relative;
  padding-left: 46px;               /* space for the index badge */
}
.page[data-page="players"] #playersBody td:first-child::before{
  content: counter(playerRow);
  position: absolute;
  left: 10px; top: 50%; transform: translateY(-50%);
  width: 28px; height: 28px;
  border-radius: 999px;
  display: grid; place-items: center;
  font-weight: 800;
  font-family: ui-monospace,Menlo,Consolas,monospace;
  letter-spacing: .2px;

  /* visuals in your current theme */
  color: #e8edf6;
  background: #0f1520;
  border: 1px solid var(--line);
  box-shadow: 0 2px 8px rgba(0,0,0,.22);
}

/* (Optional) show a small 'åºå·' label in the header's first cell, if present */
.page[data-page="players"] table thead th:first-child{
  position: relative;
  padding-left: 46px;
}
.page[data-page="players"] table thead th:first-child::before{
  content: 'åºå·';
  position: absolute;
  left: 10px; top: 50%; transform: translateY(-50%);
  font-size: 16px;
  color: var(--muted);
  font-weight: 600;
}


/* ç©å®¶åè¾“å…¥æ¡†ï¼šæ–‡å­—å±…ä¸­ */
input.name {
  width: 160px;
  text-align: center;
}

/* å†å²åˆ—è¡¨é‡Œç¦ç”¨çš„ç¼–è¾‘æŒ‰é’®æ ·å¼ */
#historyBody .btn:disabled{
  opacity: .45;
  cursor: not-allowed;
  filter: grayscale(1);
}

/* ===== ç¾åŒ–åº•éƒ¨ tabbarï¼ˆç»ç’ƒ+é«˜äº®æŒ‡ç¤º+åŠ¨æ•ˆï¼‰ ===== */

/* å®¹å™¨ï¼šåŠé€æ˜ç»ç’ƒã€åœ†è§’ã€å±…ä¸­ã€è‡ªé€‚åº”å®‰å…¨åŒº */
.tabbar{
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: calc(env(safe-area-inset-bottom) + var(--tabbar-offset));
  z-index: 60;

  display: grid;
  grid-auto-flow: column;
  gap: 2px;

  width: min(480px, calc(100% - 24px));
  height: 78px;
  padding: 6px;
  border-radius: 999px;

  background: rgba(14,18,28,.55);
  backdrop-filter: blur(12px) saturate(1.15);
  -webkit-backdrop-filter: blur(12px) saturate(1.15);
  border: 1px solid rgba(180,190,210,.18);
  box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
}

/* æŒ‰é’®ï¼šå»è¾¹æ¡†ã€æŸ”å’Œæ–‡å­—ã€æ°´å¹³æ’åˆ—å›¾æ ‡+æ–‡å­— */
.tabbtn{
  position: relative;
  display: grid;
  grid-template-rows: 1fr auto;
  place-items: center;
  gap: 2px;

  border: none;
  background: transparent;
  color: #cfd7e6;
  font-size: 12px;
  font-weight: 600;

  border-radius: 999px;
  padding: 6px 8px;
  transition: color .18s ease, transform .12s ease, background .18s ease;
  -webkit-tap-highlight-color: transparent;
}

/* å›¾æ ‡å°ºå¯¸ */
.tabbtn .ico{
  width: 34px; height: 24px;
  display: inline-grid; place-items: center;
}
.tabbtn .ico svg{
  width: 100%; height: 100%;
  stroke: currentColor; fill: none;
  stroke-width: 1.8; stroke-linecap: round; stroke-linejoin: round;
}

/* æ´»è·ƒæ€ï¼šä¸»è‰²ã€å¾®åº•å…‰ */
.tabbtn.active{
  color: var(--accent);
  background: linear-gradient(180deg, rgba(32,42,58,.35), rgba(16,23,35,.18));
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}


.tabbtn.active::after{ transform: translateX(-50%) scaleX(1); }

/* äº¤äº’æ€ï¼šæ‚¬æµ®æ›´äº®ã€æŒ‰å‹å¼¹è·³æ¶Ÿæ¼ª */
@media (hover:hover){
  .tabbtn:hover{ color:#e9f2ff; background: rgba(255,255,255,.03); }
}
.tabbtn:active{ transform: translateY(1px) scale(.99); }
.tabbtn:focus-visible{ outline:2px solid #3b82f6; outline-offset:2px; }

/* æ¶Ÿæ¼ª */
.tabbtn::before{
  content:'';
  position:absolute; inset:0;
  border-radius:16px;
  background: radial-gradient(40% 40% at center, rgba(255,255,255,.12), rgba(255,255,255,0) 70%);
  opacity:0; transform: scale(.7);
  transition: opacity .24s ease, transform .24s ease;
  pointer-events:none;
}
.tabbtn:active::before{ opacity:1; transform: scale(1.05); }

/* æ¿€æ´»åŠ¨ç”»ï¼šå›¾æ ‡è½»å¾®å¼¹è·³ */
@keyframes tabBounce{ 0%{transform:translateY(0)} 40%{transform:translateY(-3px)} 100%{transform:translateY(0)} }
.tabbtn.active .ico{ animation: tabBounce .28s cubic-bezier(.22,.61,.36,1); }

/* å¯é€‰ï¼šæœªè¯»çº¢ç‚¹ï¼ˆåœ¨æŒ‰é’®å†…åŠ ä¸€ä¸ª .dot å…ƒç´ å³å¯ï¼‰ */
.tabbtn .dot{
  position:absolute; top:8px; right:12px;
  width:8px; height:8px; border-radius:999px;
  background:#ef4444; box-shadow:0 0 10px rgba(239,68,68,.5);
}

/* æ¯ä¸ª page åº•éƒ¨è¡¥ä¸€æ®µâ€œæ»šåŠ¨å°¾å·´â€ï¼Œæ‰©å¤§å¯æ»‘åŠ¨è·ç¦» */
.page{
  position: relative;
}

.page::after{
  content: '';
  display: block;
  height: calc(var(--reserved-bottom, 0px) + var(--scroll-extra, 260px));
  /* â†‘ æƒ³æ›´é•¿å°±æŠŠ --scroll-extra è°ƒå¤§ï¼Œæ¯”å¦‚ 220px / 280px */
}

/* åªæƒ³è®©â€œè®°åˆ†â€é¡µæ›´é•¿ï¼šå•ç‹¬è¦†ç›–ï¼ˆå¯é€‰ï¼‰ */
.page[data-page="score"]::after{
  height: calc(var(--reserved-bottom, 0px) + 200px);
}



.panel, .bombCard, .rankCard{
  background: rgba(20,24,36,0.65);   /* åŠé€æ˜ï¼Œè€Œä¸æ˜¯çº¯è‰² */
  backdrop-filter: blur(12px) saturate(1.2);
  -webkit-backdrop-filter: blur(12px) saturate(1.2);
  border: 1px solid rgba(255,255,255,0.08);
}

html::before{
  content:'';
  position: fixed; inset: 0;
  background: radial-gradient(800px 500px at 50% 100%, rgba(80,150,255,0.08), transparent 70%);
  pointer-events: none;
  z-index: 0;
}

@keyframes bgFlow{
  0%{ background-position: 0% 50%; }
  100%{ background-position: 100% 50%; }
}
html{
  background:
    radial-gradient(800px 600px at 20% 20%, rgba(14, 91, 232, 0.12), transparent 70%),
    radial-gradient(600px 400px at 80% 80%, rgba(218, 49, 124, 0.1), transparent 70%),
    #0b0f18; /* çº¯æ·±åº• */
  background-attachment: fixed;
}

/* â‘  é¢æ¿æŠ¬å‡æ„Ÿ + å†…å‘å…‰è¾¹ */
.panel{
  position: relative;
  overflow: clip;
  box-shadow:
    0 12px 30px rgba(92, 87, 87, 0.3),
    0 1px 0 rgba(21, 17, 17, 0.05) inset,
    0 0 0 1px rgba(213, 93, 93, 0.04) inset;
}
/* â‘¡ é¢æ¿é¡¶éƒ¨åˆ†éš”çº¿ï¼ˆâ€œæ‹‰ä¸é‡‘å±â€è´¨æ„Ÿï¼‰ */
.panel::before{
  content:"";
  position:absolute; inset:0 0 auto 0; height:1px;
  background: linear-gradient(90deg, transparent, rgba(84, 83, 87, 0.18), transparent);
  opacity:.8;
}


/* â‘£ åˆ†éš”çº¿æ›´ç²¾è‡´ï¼ˆå†å²/è¡¨æ ¼/å¡ç‰‡é€šç”¨ï¼‰ */
.hr-soft{
  height:1px; margin:10px 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.12), transparent);
  border:0;
}

/* â‘¤ è½»å¾®æ‚¬æµ®åŠ¨æ•ˆï¼ˆå¡ç‰‡/æŒ‰é’®å¯å¤ç”¨ï¼‰ */
.hover-lift{
  transition: transform .18s var(--trans-fast), box-shadow .18s var(--trans-fast);
}
@media(hover:hover){
  .hover-lift:hover{
    transform: translateY(-2px);
    box-shadow: 0 14px 36px rgba(0,0,0,.32);
  }
}

/* æ’åå¡å³ä¾§åˆ†æ•°â€œæ•°ç æ»šåŠ¨æ„Ÿâ€ */
.rankScore{
  position:relative; overflow:hidden;
}
.rankScore.bump{
  animation: scoreBump .38s cubic-bezier(.22,.61,.36,1);
}
@keyframes scoreBump{
  0%{ transform: translateY(0) }
  45%{ transform: translateY(-2px) }
  100%{ transform: translateY(0) }
}

/* ç¬¬ä¸€åç»¶å¸¦ */
.rankCard:first-child::after{
  content:"TOP 1";
  position:absolute; right:-6px; top:10px;
  font-size:10px; font-weight:800; letter-spacing:.6px;
  transform: rotate(10deg);
  padding:4px 8px; border-radius:6px;
  color:#1a1d24; background: linear-gradient(135deg,#ffe28a,#ffbe55);
  box-shadow:0 6px 16px rgba(0,0,0,.25);
}

/* æ›´ç»†ã€æ›´æŸ”å’Œçš„è¡Œåˆ†éš”çº¿ï¼›é¦–æœ«è¡Œæ·¡åŒ– */
table tr td{ border-bottom: 1px dashed rgba(255,255,255,.14); }
table tr:last-child td{ border-bottom-color: rgba(255,255,255,.08); }

/* ===== å°è®¡æ¡ï¼šå¯é…ç½®ç»ç’ƒè´¨æ„Ÿ + ç»Ÿä¸€å¼¹å‡º/æ”¶èµ·åŠ¨ç”»ï¼ˆæ— å†²çªç‰ˆï¼‰ ===== */

/* ç»Ÿä¸€å˜é‡ â€”â€” åˆå¹¶åˆ°å…¨å±€ :rootï¼Œé¿å…é‡å¤å®šä¹‰ */
:root{
  /* åŠ¨æ•ˆå‚æ•° */
  --dock-pop-dur: .36s;
  --dock-pop-ease: cubic-bezier(.22,.61,.36,1);
  --dock-pop-translate: 60px;  /* ä»æ›´ä¸‹é¢å¼¹å‡ºï¼šè°ƒå¤§æ›´å¤¸å¼ ï¼Œä¾‹å¦‚ 80px/100px */
  --dock-pop-overshoot: 10px;
  --dock-pop-blur: 8px;
  --dock-exit-dur: .30s;
  --dock-exit-ease: cubic-bezier(.16,.84,.44,0.1); /* æ›´é¡ºæ»‘çš„ç¼“åŠ¨ */
  --dock-exit-translate: 28px;       /* ä¸‹è½è·ç¦»ï¼ˆæƒ³æ›´æ˜æ˜¾å°±è°ƒå¤§åˆ° 36/48pxï¼‰ */
  --dock-exit-squash: .98;           /* è½»å¾®å‹æ‰ï¼ˆ0.96~1ï¼‰ */
  /* ç»ç’ƒè§‚æ„Ÿ */
  --dock-glass-bg: rgba(37, 36, 36, 0.68);           /* ç»ç’ƒåº•è‰²ï¼ˆä¸»æ§è‰²ï¼‰ */
  --dock-glass-border: rgba(180,190,210,0.18);        /* å¤–åœˆè¾¹çº¿ */
  --dock-glass-innerline: rgba(97, 91, 91, 0.31);     /* å†…ä¾§é«˜å…‰çº¿ */
  --dock-glass-blur: 23px;                            /* æ¯›ç»ç’ƒæ¨¡ç³ŠåŠå¾„ */
  --dock-glass-sat: 1.35;                             /* é¥±å’Œææ‹‰ */
  --dock-bottom-glow: radial-gradient(60% 120% at 50% 120%, rgba(255,255,255,.10), rgba(255,255,255,0) 70%);
  --dock-noise:
    radial-gradient(1px 1px at 25% 35%, rgba(255,255,255,.10) 0, transparent 100%),
    radial-gradient(1px 1px at 75% 55%, rgba(255,255,255,.08) 0, transparent 100%),
    radial-gradient(1px 1px at 45% 75%, rgba(255,255,255,.06) 0, transparent 100%);
}

/* å¤–å±‚å®¹å™¨ï¼šä½ç½®ã€å±‚çº§ã€äº¤äº’ç»Ÿä¸€ */
.subtotalDock{
  position: fixed;
  left: 50%;
  bottom: calc(var(--tabbar-h) + var(--tabbar-offset) + 12px + env(safe-area-inset-bottom));
  transform: translateX(-50%);
  z-index: 80;
  pointer-events: none;
  opacity: 0;
  will-change: transform, opacity;
}

/* å…¥åœº/ç¦»åœºåŠ¨ç”» */
.subtotalDock.show{
  animation: dockPopIn var(--dock-pop-dur) var(--dock-pop-ease) forwards;
}

/* è§¦å‘ç¦»åœºï¼šå¤–å±‚ç»Ÿä¸€åšåŠ¨ç”»ï¼Œå†…å±‚åªåšéšåŠ¨ä½ç§» */
.subtotalDock.leaving{
  animation: dockExit var(--dock-exit-dur) var(--dock-exit-ease) forwards;
  pointer-events: none;              /* é€€åœºæœŸé—´ç¦ç‚¹ */
}

/* å†…å±‚ä¸å¤–å±‚åŒæ­¥ä¸€ç‚¹ä½ç§»ï¼Œé¿å…â€œç”»æ¡†ä¸åŒæ­¥â€ */
.subtotalDock.leaving .dockInner{
  transform: translateY(8px);
  transition: transform var(--dock-exit-dur) var(--dock-exit-ease);
}

/* å…³é”®å¸§ï¼šå…ˆå¾®ç¼©/ä¸‹è½ï¼Œå†è‡ªç„¶æ¶ˆå¤± */
@keyframes dockExit{
  0%   { opacity: 1;  transform: translateX(-50%) translateY(0) scale(1); }
  60%  { opacity: .22; transform: translateX(-50%) translateY(calc(var(--dock-exit-translate) * .45)) scale(var(--dock-exit-squash)); }
  100% { opacity: 0;  transform: translateX(-50%) translateY(var(--dock-exit-translate))        scale(var(--dock-exit-squash)); }
}

/* å…³é”®å¸§åŠ¨ç”»ï¼ˆä¸å†ä½¿ç”¨ filterï¼Œé¿å…é˜»æ–­ backdrop-filterï¼‰ */
@keyframes dockPopIn{
  0%   { opacity: 0; transform: translateX(-50%) translateY(var(--dock-pop-translate)) scale(.98); }
  55%  { opacity: 1; transform: translateX(-50%) translateY(calc(var(--dock-pop-overshoot) * -1)) scale(1.02); }
  100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
}
@keyframes dockPopOut{
  0%   { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
  100% { opacity: 0; transform: translateX(-50%) translateY(14px) scale(.98); }
}

/* ç»ç’ƒä½“æœ¬ä½“ï¼šä¸å†ç›´æ¥å†™ backdrop-filterï¼Œäº¤ç»™ ::before åš */
.subtotalDock .dockInner{
  position: relative;
  display:flex; align-items:center; gap:16px;
  padding:12px 14px;
  border-radius:999px;
  pointer-events: auto;

  background: var(--dock-glass-bg);
  border: 1px solid var(--dock-glass-border);
  background-clip: padding-box;
  color: var(--ink);

  transform: translateY(4px);
  transition: transform var(--dock-pop-dur) var(--dock-pop-ease);
  box-shadow:
    var(--shadow),
    inset 0 1px 0 rgba(255, 255, 255, 0.4),
    inset 0 -1px 0 rgba(0,0,0,.12);

  z-index: 0;
}
.subtotalDock.show .dockInner{ transform: translateY(0); }
.subtotalDock.leaving .dockInner{ transform: translateY(8px); }
.subtotalDock .dockInner > *{ position: relative; z-index: 1; }

/* ::before ä¸“èŒåšçœŸå®æ¨¡ç³Šå±‚ */
.subtotalDock .dockInner::before{
  content:"";
  position:absolute; inset:0; border-radius:inherit;
  background: rgba(255,255,255,0.01);
  backdrop-filter: blur(var(--dock-glass-blur)) saturate(var(--dock-glass-sat));
  -webkit-backdrop-filter: blur(var(--dock-glass-blur)) saturate(var(--dock-glass-sat));
  z-index: 0;
  box-shadow: inset 0 0 0 1px var(--dock-glass-innerline);
}

/* ::after è´Ÿè´£åº•éƒ¨æ™•å…‰ + é¢—ç²’å™ªç‚¹ */
.subtotalDock .dockInner::after{
  content:"";
  position:absolute; inset:0; border-radius:inherit;
  background:
    var(--dock-bottom-glow),
    var(--dock-noise);
  opacity: 1;
  mix-blend-mode: soft-light;
  pointer-events: none;
  z-index: 0;
}

/* å­æŒ‰é’® */
.subtotalDock .gbtn{ opacity:1; transform:none; }

/* é™çº§ï¼šåŠ¨æ•ˆåå¥½è¾ƒä½æ—¶ */
@media (prefers-reduced-motion: reduce){
  .subtotalDock, .subtotalDock .dockInner{
    animation: none !important;
    transition: none !important;
    transform: translateX(-50%) translateY(0) !important;
    filter: none !important; opacity: 1 !important;
  }
}